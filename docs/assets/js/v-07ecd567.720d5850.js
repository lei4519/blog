"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[726],{174:(n,s,a)=>{a.r(s),a.d(s,{default:()=>d});var t=a(6252);const p=(0,t.uE)('<h1 id="ç»™åŸç”Ÿå°ç¨‹åºå®‰æ’ä¸Šcomposition-api" tabindex="-1"><a class="header-anchor" href="#ç»™åŸç”Ÿå°ç¨‹åºå®‰æ’ä¸Šcomposition-api" aria-hidden="true">#</a> ç»™åŸç”Ÿå°ç¨‹åºå®‰æ’ä¸ŠComposition API</h1><blockquote><p>é€šè¿‡å¯¹é€»è¾‘å±‚çš„å°è£…ï¼Œè®©åŸç”Ÿå°ç¨‹åºä½¿ç”¨Vue3çš„Composotion API</p></blockquote><h2 id="ä½¿ç”¨ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨ç¤ºä¾‹" aria-hidden="true">#</a> ä½¿ç”¨ç¤ºä¾‹</h2><p>index.wxml</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{{count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ•°å­— +1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>index.js</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Epage<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> onShowHooks<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;enhance-weapp&#39;</span>\n\n<span class="token keyword">function</span> <span class="token function">useCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>\n  <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    count<span class="token punctuation">.</span>value<span class="token operator">++</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">onShowHooks</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æˆ‘æ˜¯useCount&#39;</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    count<span class="token punctuation">,</span>\n    add\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n\n<span class="token function">Epage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">onShowHooks</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æˆ‘æ˜¯setup&#39;</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n    <span class="token keyword">return</span> <span class="token function">useCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="åŸç†ç®€è¿°" tabindex="-1"><a class="header-anchor" href="#åŸç†ç®€è¿°" aria-hidden="true">#</a> åŸç†ç®€è¿°</h2><p>æµç¨‹å›¾å…ˆèµ°ä¸€æ³¢</p><p><img src="https://gitee.com/lei451927/picture/raw/master/2020-12-28/1609148257431-image.png" alt="image"></p><ol><li>Epageå‡½æ•°ä¼šå¯¹ä¼ å…¥çš„<code>options</code>å¯¹è±¡å±æ€§è¿›è¡Œéå†ï¼Œå¯¹æ‰€æœ‰çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•è¿›è¡Œè£…é¥°ï¼Œå°†ç”Ÿå‘½å‘¨æœŸæ”¹é€ æˆæ•°ç»„ç»“æ„ï¼Œå¹¶æä¾›ç›¸å…³çš„hooksæ–¹å¼ä»¥è°ƒç”¨æ³¨å†Œã€‚</li><li>åœ¨onLoad/createdä¸­æ£€æŸ¥å¹¶æ‰§è¡Œ<code>setup</code>å‡½æ•°ï¼Œæ‹¿åˆ°å…¶è¿”å›å€¼<code>setupData</code>ã€‚</li><li>åˆ›å»º<code>options.data</code>å¯¹è±¡å‰¯æœ¬ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œä½¿ç”¨<code>reactive</code>å°†å…¶å“åº”å¼åä¿å­˜åˆ°<code>this.data$</code>å±æ€§ä¸Šã€‚</li><li>éå†<code>setupData</code>ï¼Œå°†å…¶å€¼ç›´æ¥èµ‹å€¼ç»™<code>this.data$</code>ï¼Œå“åº”å¼è§£åŒ…èµ‹å€¼ç»™<code>this.data</code>ã€‚</li><li>è°ƒç”¨<code>this.setData(this.data)</code>ï¼ŒåŒæ­¥æ•°æ®è‡³æ¸²æŸ“å±‚ã€‚</li><li>ä¿å­˜<code>this.data</code>å‰¯æœ¬è‡³<code>this.__oldData__</code>ã€‚</li><li>ä½¿ç”¨<code>watch</code>ç›‘å¬<code>this.data$</code>ï¼Œå“åº”å¼è§¦å‘ådiff <code>this.data$</code>ä¸<code>this.__oldData__</code>ã€‚</li><li>è°ƒç”¨<code>this.setData(diffData)</code>ï¼ŒåŒæ­¥æ•°æ®è‡³æ¸²æŸ“å±‚ã€‚</li><li>ä¼˜åŒ–éƒ¨åˆ†ï¼šå½“é¡µé¢onHideæ—¶ä¼šå–æ¶ˆå“åº”å¼ç›‘å¬ï¼ŒonShowæ—¶ä¼šé‡æ–°ç›‘å¬å¹¶diffä¸€æ¬¡æ•°æ®ã€‚</li></ol>',11),e=(0,t.Uk)("ä»¥ä¸Šæ˜¯æ ¸å¿ƒçš„å®ç°æ€è·¯ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰å…¨å±€"),o=(0,t._)("code",null,"mixins",-1),c=(0,t.Uk)("ã€ç”Ÿå‘½å‘¨æœŸé˜»å¡æ‰§è¡Œã€å…¨å±€ç”Ÿå‘½å‘¨æœŸæ§åˆ¶ç­‰é€»è¾‘ï¼Œå…·ä½“å¯ä»¥å»"),l={href:"https://github.com/lei4519/enhance-weapp",target:"_blank",rel:"noopener noreferrer"},u=(0,t.Uk)("enhance-weapp"),i=(0,t.Uk)("ï¼Œçœ‹ä¸‹ä»‹ç»å’Œæºç ã€‚"),r=(0,t._)("p",null,"å¦‚æœæœ¬ç¯‡å†…å®¹å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµstarğŸ‘ã€‚",-1),k={},d=(0,a(3744).Z)(k,[["render",function(n,s){const a=(0,t.up)("OutboundLink");return(0,t.wg)(),(0,t.iD)(t.HY,null,[p,(0,t._)("p",null,[e,o,c,(0,t._)("a",l,[u,(0,t.Wm)(a)]),i]),r],64)}]])},3744:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,t]of s)a[n]=t;return a}},637:(n,s,a)=>{a.r(s),a.d(s,{data:()=>t});const t={key:"v-07ecd567",path:"/technology/MiniProgram/framework.html",title:"ç»™åŸç”Ÿå°ç¨‹åºå®‰æ’ä¸ŠComposition API",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"ä½¿ç”¨ç¤ºä¾‹",slug:"ä½¿ç”¨ç¤ºä¾‹",children:[]},{level:2,title:"åŸç†ç®€è¿°",slug:"åŸç†ç®€è¿°",children:[]}],filePathRelative:"technology/MiniProgram/framework.md",git:{updatedTime:1614592133e3}}}}]);