(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{407:function(t,a,s){"use strict";s.r(a);var n=s(11),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"ç»™åŸç”Ÿå°ç¨‹åºå®‰æ’ä¸Šcomposition-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»™åŸç”Ÿå°ç¨‹åºå®‰æ’ä¸Šcomposition-api"}},[t._v("#")]),t._v(" ç»™åŸç”Ÿå°ç¨‹åºå®‰æ’ä¸ŠComposition API")]),t._v(" "),s("blockquote",[s("p",[t._v("é€šè¿‡å¯¹é€»è¾‘å±‚çš„å°è£…ï¼Œè®©åŸç”Ÿå°ç¨‹åºä½¿ç”¨Vue3çš„Composotion API")])]),t._v(" "),s("h2",{attrs:{id:"ä½¿ç”¨ç¤ºä¾‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨ç¤ºä¾‹"}},[t._v("#")]),t._v(" ä½¿ç”¨ç¤ºä¾‹")]),t._v(" "),s("p",[t._v("index.wxml")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{count}}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("bindtap")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("add"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("æ•°å­— +1"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("index.js")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Epage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onShowHooks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'enhance-weapp'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("add")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onShowHooks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æˆ‘æ˜¯useCount'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    add\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Epage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onShowHooks")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æˆ‘æ˜¯setup'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useCount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"åŸç†ç®€è¿°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŸç†ç®€è¿°"}},[t._v("#")]),t._v(" åŸç†ç®€è¿°")]),t._v(" "),s("p",[t._v("æµç¨‹å›¾å…ˆèµ°ä¸€æ³¢")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/lei451927/picture/raw/master/2020-12-28/1609148257431-image.png",alt:"image"}})]),t._v(" "),s("ol",[s("li",[t._v("Epageå‡½æ•°ä¼šå¯¹ä¼ å…¥çš„"),s("code",[t._v("options")]),t._v("å¯¹è±¡å±æ€§è¿›è¡Œéå†ï¼Œå¯¹æ‰€æœ‰çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•è¿›è¡Œè£…é¥°ï¼Œå°†ç”Ÿå‘½å‘¨æœŸæ”¹é€ æˆæ•°ç»„ç»“æ„ï¼Œå¹¶æä¾›ç›¸å…³çš„hooksæ–¹å¼ä»¥è°ƒç”¨æ³¨å†Œã€‚")]),t._v(" "),s("li",[t._v("åœ¨onLoad/createdä¸­æ£€æŸ¥å¹¶æ‰§è¡Œ"),s("code",[t._v("setup")]),t._v("å‡½æ•°ï¼Œæ‹¿åˆ°å…¶è¿”å›å€¼"),s("code",[t._v("setupData")]),t._v("ã€‚")]),t._v(" "),s("li",[t._v("åˆ›å»º"),s("code",[t._v("options.data")]),t._v("å¯¹è±¡å‰¯æœ¬ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œä½¿ç”¨"),s("code",[t._v("reactive")]),t._v("å°†å…¶å“åº”å¼åä¿å­˜åˆ°"),s("code",[t._v("this.data$")]),t._v("å±æ€§ä¸Šã€‚")]),t._v(" "),s("li",[t._v("éå†"),s("code",[t._v("setupData")]),t._v("ï¼Œå°†å…¶å€¼ç›´æ¥èµ‹å€¼ç»™"),s("code",[t._v("this.data$")]),t._v("ï¼Œå“åº”å¼è§£åŒ…èµ‹å€¼ç»™"),s("code",[t._v("this.data")]),t._v("ã€‚")]),t._v(" "),s("li",[t._v("è°ƒç”¨"),s("code",[t._v("this.setData(this.data)")]),t._v("ï¼ŒåŒæ­¥æ•°æ®è‡³æ¸²æŸ“å±‚ã€‚")]),t._v(" "),s("li",[t._v("ä¿å­˜"),s("code",[t._v("this.data")]),t._v("å‰¯æœ¬è‡³"),s("code",[t._v("this.__oldData__")]),t._v("ã€‚")]),t._v(" "),s("li",[t._v("ä½¿ç”¨"),s("code",[t._v("watch")]),t._v("ç›‘å¬"),s("code",[t._v("this.data$")]),t._v("ï¼Œå“åº”å¼è§¦å‘ådiff "),s("code",[t._v("this.data$")]),t._v("ä¸"),s("code",[t._v("this.__oldData__")]),t._v("ã€‚")]),t._v(" "),s("li",[t._v("è°ƒç”¨"),s("code",[t._v("this.setData(diffData)")]),t._v("ï¼ŒåŒæ­¥æ•°æ®è‡³æ¸²æŸ“å±‚ã€‚")]),t._v(" "),s("li",[t._v("ä¼˜åŒ–éƒ¨åˆ†ï¼šå½“é¡µé¢onHideæ—¶ä¼šå–æ¶ˆå“åº”å¼ç›‘å¬ï¼ŒonShowæ—¶ä¼šé‡æ–°ç›‘å¬å¹¶diffä¸€æ¬¡æ•°æ®ã€‚")])]),t._v(" "),s("p",[t._v("ä»¥ä¸Šæ˜¯æ ¸å¿ƒçš„å®ç°æ€è·¯ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰å…¨å±€"),s("code",[t._v("mixins")]),t._v("ã€ç”Ÿå‘½å‘¨æœŸé˜»å¡æ‰§è¡Œã€å…¨å±€ç”Ÿå‘½å‘¨æœŸæ§åˆ¶ç­‰é€»è¾‘ï¼Œå…·ä½“å¯ä»¥å»"),s("a",{attrs:{href:"https://github.com/lei4519/enhance-weapp",target:"_blank",rel:"noopener noreferrer"}},[t._v("enhance-weapp"),s("OutboundLink")],1),t._v("ï¼Œçœ‹ä¸‹ä»‹ç»å’Œæºç ã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœæœ¬ç¯‡å†…å®¹å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµstarğŸ‘ã€‚")])])}),[],!1,null,null,null);a.default=e.exports}}]);